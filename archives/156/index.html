<!DOCTYPE HTML>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,熊猫小A,Galileo,blog" />
    <meta name="generator" content="Maverick 1.1" />
    <meta name="template" content="Galileo" />
    <link rel="alternate" type="application/rss+xml" title="無文字 | 三無計劃 &raquo; RSS 2.0" href="https://blog.imalan.cn/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="無文字 | 三無計劃 &raquo; ATOM 1.0" href="https://blog.imalan.cn/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/galileo-e255dd166a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/ExSearch/ExSearch-182e5a8868.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/katex.min.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700&display=swap">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/95f87b437e6a9575061dd805e8f8c427.json"
        }
    </script>
    
<title>使用「捷径」给 GIF 加上进度条 - 無文字 | 三無計劃</title>
<meta name="author" content="熊猫小A" />
<meta name="description" content="最后那只汪也太不给面子了吧" />
<meta property="og:title" content="使用「捷径」给 GIF 加上进度条 - 無文字 | 三無計劃" />
<meta property="og:description" content="最后那只汪也太不给面子了吧" />
<meta property="og:site_name" content="無文字 | 三無計劃" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.imalan.cn/archives/156/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2018-09-08T20:46:00-00.00" />
<meta name="twitter:title" content="使用「捷径」给 GIF 加上进度条 - 無文字 | 三無計劃" />
<meta name="twitter:description" content="最后那只汪也太不给面子了吧" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net" />
<link rel="dns-prefetch" href="//blog.imalan.cn" />
<!--
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/brand_font/embed.css" />
<style>.brand{font-family:FZCuJinLFW,serif;font-weight: normal!important;}</style>
-->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/apple-touch-icon.png?v=PY43YeeEKx">
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/favicon-32x32.png?v=yyLyaqbyRG">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/favicon-16x16.png?v=yyLyaqbyRG">
<link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/safari-pinned-tab.svg?v=yyLyaqbyRG" color="#505050">
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/favicon.ico?v=yyLyaqbyRG">
<meta name="application-name" content="三無計劃">
<meta name="apple-mobile-web-app-title" content="三無計劃">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#000000">
<meta name="baidu-site-verification" content="9BEwwo6Ibg" />

    </head>
    
    <body>
        
        <div class="container">
            <header id="ga-header">
                <div first>
                    <aside id="ga-brand">
                        <h1 class="brand"><a class="no-style" href="https://blog.imalan.cn/">無文字 | 三無計劃</a></h1>
                        <p>只坚持一种正义。我的正义。</p>
                    </aside>
                </div>
                <div second id="ga-nav">
                    <nav class="navs">
                        <ul><li><a class="ga-highlight" href="https://blog.imalan.cn/" target="_self">首页</a></li><span class="separator">·</span><li><a class="ga-highlight" href="https://blog.imalan.cn/archives/" target="_self">归档</a></li><span class="separator">·</span><li><a class="ga-highlight" href="https://blog.imalan.cn/links/" target="_self">友链</a></li><span class="separator">·</span><li><a class="ga-highlight" href="https://blog.imalan.cn/about/" target="_self">关于</a></li><span class="separator">·</span><li><a href="#" target="_self" class="search-form-input ga-highlight">搜索</a></li></ul>
                    </nav>
                </div>
            </header>
            <div class="wrapper">
                
<main>    
    <section class="ga-section ga-content">
        <article class="yue">
            <h1 class="ga-post_title">使用「捷径」给 GIF 加上进度条</h1>
            <span class="ga-post_meta ga-mono">
                <span>熊猫小A</span>
                <time>
                    2018-09-08
                </time>
                
                in <a no-style class="category" href="https://blog.imalan.cn/category/偶尔Geek/">
                    偶尔Geek
                </a>
                
                
                <span class="leancloud_visitors" 
                    id="/archives/156/" 
                    data-flag-title="使用「捷径」给 GIF 加上进度条"> · <i class="leancloud-visitors-count"></i> Views</span>
                
            </span>
            <div class="ga-content_body">
                <p>看到一张 GIF，可把我笑坏了，最后那只汪也太不给面子了吧哈哈哈哈~</p>
<p><figure style="flex: 88.96797153024912" ><img class="lazyload" width="500" height="281" data-src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/archives/assets/d81f60bcf8502b9570f955292b36ca1a.gif" /><figcaption>最后那只汪也太不给面子了吧</figcaption></figure></p>
<p>好的，据说大约有 98% 的人承认被这样的 GIF 套路过，还有 2% 的人被套路了却不承认（我瞎编的数）。机智如你，看到这样的 GIF 还是会傻乎乎地一直盯着看，为什么呢？</p>
<p>你可能注意到了：这是因为 GIF 图片是可以无限循环的。GIF 图实则可看做是一个反复轮播的图片序列，序列中的每一幅图称作「一帧」，只要巧妙地设置起始帧与末尾帧就能使整个 GIF 无缝循环到天荒地老。这个特性在制作上面的整人图时有奇效，但在某些应用场景中却不然。</p>
<p>许多写文章的同学知道有「一图胜千言」的说法，在文章中引入动态内容（比如视频、GIF）来辅助表达可以达到事半功倍的效果，例如少数派的<a href="https://sspai.com/post/47022">这篇文章</a>，利用 GIF 把浏览器的新特性展现得清清楚楚。可是当 GIF 过长，或者没有明显的起始、结束标志（就像文首那样）时读者可能会产生一种焦虑感：这个 GIF 什么时候完？<strong>我到底是不是已经看完一遍了</strong>？</p>
<p>视频却没有这个问题，这是因为多数视频播放器是有<strong>进度条</strong>的。进度条，即使是假的进度条，也能有效地缓解观看者的焦虑感。 例如上面提到的那篇少数派文章，你是否注意到了里面的 GIF 就有进度条呢？</p>
<p>有了这个点子就好办了。其实实践的原理也并不复杂：假如某个 GIF 共有 n 帧，那么播放到第 i 帧时，其进度（以小数计）就应该是 i÷n。我们考虑往这一帧上添加一个进度条，设帧宽度为 width，进度条的长度就应该是 width×i÷n，是不是？具体的实现方法有许多，可以使用 Photoshop 等专业软件来做，本文介绍一种简单的方法：利用 iOS 12 中内置的应用「捷径」来实现。</p>
<p><strong>动作链接</strong>：<a href="https://workflow.is/workflows/bac74b4296824ca1b81e3b7ac61fb369">点击下载</a>，使用方式：点击链接导入这个动作，运行它并从相册选择需要处理的 GIF 即可，最后的结果会保存回手机相册。</p>
<p>下面我来讲解一下如何一步步制作并优化这个动作，以供参考。</p>
<h2>动作解析</h2>
<h3>需求</h3>
<p>明确需求是（功利性地）做任何东西之前的必须步骤。这里我们的需求是：制作一个动作，它的输入是从相册选择的一张 GIF，输出则是一张带有进度条的 GIF。</p>
<h3>制作</h3>
<p>过程原理在前文已经讲明了。最为关键的步骤是：提取出 GIF 的每一帧，在每帧上叠加合适长度的进度条，然后再把处理后的帧拼接成新的 GIF。</p>
<p>iOS 12 内置的「捷径」应用是 iOS 平台著名效率应用 Workflow 的继任者，里面提供了许多基本的功能模块，用户可自由组合这些模块来实现相对更复杂的需求。在本例中，捷径提供了四个最为关键的动作：Get Frames From Image 、Resize Image、 Combine Images 与 Make GIF。</p>
<ul>
<li>Get Frames From Image 动作的输入是一张 GIF，运行后可以提取出 GIF 的每一帧，得到一个包含了多张图片的列表（list）。</li>
<li>Resize Image 动作的输入是一张图片，它可以将这张图片缩放到设定的尺寸。本例中就用它来制作进度条。你想到应该怎么做了吗？所谓进度条，其实就是一张细长的纯色图片，它可以由任何一张纯色图片制得：只要让它的宽度是进度条长度，高度大约两三个像素即可。</li>
<li>Combine Images 动作的输入是一个图片列表<sup id="fn_ref_1"><a href="#fn_1">1</a></sup>，它的作用是拼接列表中的图片，纵向或横向皆可，并输出拼接后的图片。本例中就用它来给每一帧加上进度条。</li>
<li>Make GIF 的输入是一个图片列表，它可以将这个列表中的图片合成为一个 GIF。</li>
</ul>
<p>不难画出完整的流程图：</p>
<p><figure style="flex: 16.886543535620053" ><img class="lazyload" width="640" height="1895" data-src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/archives/assets/189a4e874d66e3d83ad98e39c818fe0f.png" /></figure></p>
<h3>分析与改进</h3>
<p>按照以上流程图制作的动作固然可以使用，但是有一个很大的缺点：它要求使用者相册中有一张纯色图片以备使用，这……太不优雅了。再说，如果你分享给你女朋友，她却发现不能直接用还要有什么纯色图，她哪里去找什么纯色图？你怎么这么敷衍？你是不是不爱她了？</p>
<p>一种解决思路是：运行前检测使用者设备上有没有这个纯色图片，若有，那就继续运行，若没有，则利用 Get Contents of URL 临时下载，并存储备用。存储的位置若可能的话，最好不要是相册，以免污染别人的照片库。很自然的，iCloud Drive 是一个绝佳选择。因此，流程图的前半部分变成了：</p>
<p><figure style="flex: 64.51612903225806" ><img class="lazyload" width="640" height="496" data-src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/archives/assets/0a108ea4d0d466a637bad4dcd95e7bf0.png" /><figcaption>e34c1bdec04fe1173971f3f3be3124d9</figcaption></figure></p>
<p>好的，这次女朋友不会夺命三问了。但是等等……若是女朋友手机没网或者提供这个纯色图片的服务器挂了呢？虽然确实不是你的问题，但是女朋友仍然有可能迁怒于你，怕怕。我们要把隐患扼杀在摇篮中。</p>
<p>究其原因，一切都是因为这个动作需要引用外部的资源：一张纯色图。如果它能直接内置到动作里就好了。能不能办到？当然可以。</p>
<p>捷径应用里内置了一个动作：Base64 Encode，有编程经验的同学应该就明白了。简单地说，Base64<sup id="fn_ref_2"><a href="#fn_2">2</a></sup>可以把一个二进制文件转换为一串纯文本，也能从文本中解码出原来的文件。既然动作不能存储图片文件，但存储文本却是可以的呀！因此在最顶部放一个 text 块，里面填写上纯色图的 Base64 编码，运行时再从这里解码得到纯色图片即可。应该说到这里，这个动作完成度算是比较高了。</p>
<p><figure style="flex: 117.05426356589147" ><img class="lazyload" width="604" height="258" data-src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/archives/assets/64231ad7a9923f56a4dae2abb0b41d84.png" /><figcaption>c51256aadd2c1a45161e1e0343b5a442</figcaption></figure></p>
<p>再来看看带进度条的 GIF：</p>
<p><figure style="flex: 88.33922261484099" ><img class="lazyload" width="500" height="283" data-src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/archives/assets/85d5470c2f739bb08d3222cf13d1769a.GIF" /><figcaption>IMG_0207</figcaption></figure></p>
<p>不能整人了，不开心￣へ￣。</p>
<h2>延伸</h2>
<p>动作的制作与优化上面就聊完了。这部分是一些额外的讨论和抛砖引玉的内容。</p>
<h3>Add to Variable</h3>
<p>在前面的流程图中，我很自然地使用了 Add to Variable 这个动作，来临时保存需要拼接的进度条和某帧。捷径应用中对这个步骤的简介是：</p>
<blockquote><p>Appends this action's input to the specified variable, creating the variable if it does not exsist.</p>
<p>This allows you to make a variable hold multiple items.</p>
</blockquote>
<p>也就是，将这个步骤的输入追加到某个变量的末尾。值得注意的是，并不<strong>与某个变量合并</strong>，而是<strong>追加</strong>。举例来说，如果你把一段文本通过这个步骤 add 到另一个变量（也是一段文本）后，并不会得到一段包含了这二者的文本，而是得到了一个「列表」，里面分别包含了两段文本。</p>
<p>听上去很绕。但我们只需要知道，这个步骤的输出一般会是一个列表。Add to Variable 这个步骤的作用可归结于<strong>暂存多个变量，以待后续处理</strong>。为什么这么说？因为「列表」其实是一种特殊的变量——存储变量的变量。</p>
<h4>暂存变量</h4>
<p>以前使用过这个应用的玩家可能知道，应用中有一个叫做 List 的步骤，可以在运行过程中保存几个变量以供后续处理。在本例中，两次 Add to Variable 然后拼接为新的一帧这一段完全可以这么改写：</p>
<p><figure style="flex: 37.03319502074689" ><img class="lazyload" width="714" height="964" data-src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/archives/assets/350c387a379a4ca776d799294b6104b2.jpg" /><figcaption>IMG_0226</figcaption></figure></p>
<p>那么 Add to Variable 还有什么存在的意义？</p>
<p>你是否注意到，虽然 List 这个动作在这里的效果要比 Add to Variable 强，使得动作看起来更简洁，但它有一个特点：容量是固定的<sup id="fn_ref_3"><a href="#fn_3">3</a></sup>。在制作这个动作时只为它预留了两个位置，一个用来放进度条，一个用来放图片帧，那就不能再运行过程中存储更多的东西了。</p>
<p>当需要暂存的内容个数不定时，List 动作就力不从心了，这时就轮到 Add to Variable 上场。不论有两个、五个还是十个一百个变量，Add to Variable 都能老老实实地帮你存好。本文中要处理的 GIF 帧数不一，因此即使经过上图的改写，与进度条拼接后的帧仍然要使用 Add to Variable 暂存最后再合成 GIF<sup id="fn_ref_4"><a href="#fn_4">4</a></sup>。</p>
<p>值得注意的是，列表中的数据类型无需是相同的，你可以把图片、音乐、文本等等内容添加到一个 List 里。暂存多个变量的部分至此结束。</p>
<h4>以待后续处理</h4>
<p>不论使用 List 还是 Add to Variable，你现在得到一个列表了。你能想到对它进行什么操作？抽象地说，操作可分为对列表中的所有元素处理，或者对其中的某些进行处理。本文中拼接列表中的图片属于前者。</p>
<p>看一个属于后者的例子。所谓「对某些进行处理」，无非是用户手动选择某些，或者自动过滤出某些。少数派 Shortcuts Gallery 中有个<a href="https://www.icloud.com/shortcuts/192ef048349942f2b9b04e5d1d73bed8">影评日记</a>的动作就是就是这样的。这个动作比较复杂，我不具体介绍里面的内容，它的流程是这样的：从豆瓣根据某个关键字搜索电影，获得前 5 个搜索结果，提取每个搜索结果的重要信息合成一个 List，供使用者选择，再根据选择的结果从豆瓣请求更为详细的信息然后进行后续处理，有兴趣请下载影评日记这个动作看看。</p>
<h4>这里有一个坑</h4>
<p>回到上面那个流程图，若是把循环中的第一个 Set Variable 也改成 Add to Variable，会发生什么事情？大家可以试一试。</p>
<p>结果就完全不对了，但看起来没有什么逻辑问题啊？就是添加到 temp 变量嘛，虽然循环开始时没有这个变量，但苹果的文档也说了，没有 temp 变量时会自动创建的。</p>
<p>这里的问题在于，Shortcuts 中的变量是全局有效的。因此在下一次循环开始时，上一次的循环的 temp 变量仍然是有效的，Add to Variable 是在上一次运行结束时 temp 变量上追加，自然就不对了。原动作中的 Set Vriable 相当于是清空了 temp 变量，然后把它的值设为预定的值，如果这个位置非要使用 Add to Variable 的话也不是不可以，那么就需要在每个循环末尾添加两步：Nothing→Set Variable(temp)，这相当于手动清空了 temp 变量。</p>
<h3>Combine Images</h3>
<p>前文提到，Combine Images 动作的作用是把一个列表里的图片拼接起来。动作上有三个选项：Mode，拼接方式，可选并列或者网格；Direction，方向，可选水平或者竖直，当 Mode 是网格时该选项无效；Spacing，间隔，即拼接时两张图片之间的距离。</p>
<p>本文中，Combine Images 的输入是一个图片 list，但我在脚注里说，不一定非得如此。你可以试试在一个 list 中放一段文本和一张图片，然后把这个 list 传给 Combine Images，看看会出现什么结果？</p>
<p>没错，动作会将文本转换为图片然后把它们拼接起来，对习惯了严格声明数据类型的程序员来说这看起来是很奇妙的，虽然最终的效果可能不是很好（尺寸会变得很奇怪）。</p>
<p>关于这一点在苹果的 <a href="https://support.apple.com/zh-cn/guide/shortcuts/welcome/ios">Shortcuts 文档</a>中有详细说明：</p>
<blockquote><p>When an action expects one type of content and you pass it another type of content, the Content Graph automatically converts that content to the appropriate type.</p>
</blockquote>
<p>也就是「自动类型转换」。「捷径」应用的前身是 Workflow，可见这个开发团队为了使任何人都能顺畅地使用这个 app 在背后做了多少工作。要知道，对数据类型、程序代码都一无所知的用户会制作出无数千奇百怪、奇思妙想的动作，要考虑到所有的意外是极为困难的，还不能简单地报错、抛出异常，因为这样太容易「劝退」了。正是开发团队在背后做的工作使我在使用这个应用时屡屡觉得惊喜，这让我想起了小时候偶得一套螺丝刀，才发现原来我仅靠自己的力量就能拆掉那么多东西（误），那是一种发自内心的喜悦。</p>
<hr><div class="footnotes"><ol><li id="fn_1">其并不一定是图片列表，后文会聊到这个问题 <a no-style href="#fn_ref_1">↩</a></li><li id="fn_2">这里的原理涉及到文件的编码问题，更细致的内容参考：https://en.wikipedia.org/wiki/Base64 <a no-style href="#fn_ref_2">↩</a></li><li id="fn_3">并不是绝对的，有兴趣的读者可以考虑一下如何使用 List 来存储任何长度的内容 <a no-style href="#fn_ref_3">↩</a></li><li id="fn_4">同样也不是绝对的，读者可以思考一下如何改写整个 shortcut，使之不使用任何的 Add to Variable 动作。这是可以做到的，但是代价是可读性、可调试性下降。制作大型的动作时不建议使用这类「奇技淫巧」 <a no-style href="#fn_ref_4">↩</a></li></ol></div>
            </div>
        </article>
        <div id="ga-tags">
    
</div>
    </section>

    
<section id="ga-content_pager">

    <div class="next">
        <a class="ga-highlight" href="https://blog.imalan.cn/archives/163/">Typecho Theme RAW 发布</a>
        <p class="yue">“在互联网上寻找栖息之地”</p>
    </div>


    <div class="prev">
        <a class="ga-highlight" href="https://blog.imalan.cn/archives/144/">秋山澪同款 - 大手办 AKG K701</a>
        <p class="yue">手办，主要目的是好看。</p>
    </div>

</section>


    
        <script>
            var initValine = function () {
                new Valine({"enable": true, "el": "#vcomments", "appId": "6chFXPTjrjYnjFk9duROcboN-gzGzoHsz", "appKey": "c1CRooaFmpLs4xi7x3YLm3ma", "visitor": true, "recordIP": true, "placeholder": "\u6765\u7545\u6240\u6b32\u8a00\u5427~"});
            }
        </script>
        <script defer src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
        <div id="vcomments"></div>
    

</main>

                <footer class="ga-mono" id="ga-footer">
                    <section>
                        <span id="ga-uptime"></span>
                        <span class="brand">無文字 | 三無計劃</span>
                    </section>
                    <section>
                        <p class="copyright">
                            <span>Copyright © 2020 熊猫小A</span>
                            <span>Powered by <a no-style href="https://github.com/AlanDecode/Maverick" target="_blank">Maverick & Galileo</a></span>
                        </p>
                        <div class="copyright">
                            <span class="footer-addon">
                                
<a no-style href="http://beian.miit.gov.cn" target="_blank">京ICP备18000133号-1</a> | 
<a no-style href="https://www.upyun.com" target="_blank">又拍云</a>

                            </span>
                            <nav class="social-links">
                                <ul><li><a class="no-style" title="Twitter" href="https://twitter.com/AlanDecode" target="_blank"><i class="gi gi-twitter"></i>Twitter</a></li><span class="separator">·</span><li><a class="no-style" title="GitHub" href="https://github.com/AlanDecode" target="_blank"><i class="gi gi-github"></i>GitHub</a></li><span class="separator">·</span><li><a class="no-style" title="Weibo" href="https://weibo.com/5245109677/" target="_blank"><i class="gi gi-weibo"></i>Weibo</a></li></ul>
                            </nav>
                        </div>
                    </section>
                    <script>
                        var site_build_date = "2017-06-29T12:00+08:00"
                    </script>
                    <script src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/galileo-dc4baa7cf4.js"></script>
                </footer>
            </div>
        </div>
    </div>

    <script defer src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js" onload="lazyload();"></script>

    <!--katex-->
    <script defer src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/katex.min.js"></script>
    <script>
    mathOpts = {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "\\[", right: "\\]", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\(", right: "\\)", display: false}
        ]
    };
    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    <script src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AlanDecode/site-Blog@gh-pages/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    
<script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e4f3a7c02ac2aabc41a1cfa95f61a026";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
</script>
<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<script>
if(window.location.hash){
    var checkExist = setInterval(function() {
       if ($(window.location.hash).length) {
          $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
          clearInterval(checkExist);
       }
    }, 100);
}
</script>
<script>
if(window.navigator && navigator.serviceWorker) {
  caches.keys().then(function(cacheNames) {
    cacheNames.forEach(function(cacheName) {
      caches.delete(cacheName);
    });
  }).then(function(){
    console.log('Cache cleaned.');
  });
  navigator.serviceWorker.getRegistrations()
  .then(function(registrations) {
    for(let registration of registrations) {
      registration.unregister();
    }
  }).then(function(){
    console.log('Service Worker stopped.');
  });
}
</script>

    </body>
</html>